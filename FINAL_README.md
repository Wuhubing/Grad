# çŸ¥è¯†è€¦åˆåˆ†æç³»ç»Ÿ - æœ€ç»ˆç‰ˆæœ¬

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ª**GPUä¼˜åŒ–çš„å¤šæ¨¡å‹çŸ¥è¯†è€¦åˆåˆ†æç³»ç»Ÿ**ï¼Œä¸“æ³¨äºæµ‹é‡è¯­è¨€æ¨¡å‹ä¸­çŸ¥è¯†ç‰‡æ®µé—´çš„è€¦åˆå¼ºåº¦ï¼Œå¹¶éªŒè¯æ¢¯åº¦ç›¸ä¼¼æ€§ä¸æ¶Ÿæ¼ªæ•ˆåº”çš„ç›¸å…³æ€§ã€‚

## ğŸš€ æ ¸å¿ƒç‰¹æ€§

- **å¤šæ¨¡å‹æ”¯æŒ**: GPT-2 å’Œ LLaMA-2 ç³»åˆ—æ¨¡å‹
- **GPUåŠ é€Ÿ**: æ¢¯åº¦è®¡ç®—å’Œè€¦åˆçŸ©é˜µè®¡ç®—å®Œå…¨åœ¨GPUä¸Šæ‰§è¡Œ
- **è¯¦ç»†ç»“æœ**: è¿”å›åŒ…å«9ä¸ªä¸»è¦éƒ¨åˆ†çš„å®Œæ•´åˆ†æç»“æœ
- **è·¨potåˆ†æ**: è‡ªåŠ¨åˆ†æä¸åŒHotpotQAé—®é¢˜é—´çš„çŸ¥è¯†è€¦åˆ
- **å¯è§†åŒ–**: è‡ªåŠ¨ç”Ÿæˆè€¦åˆçƒ­å›¾å’Œåˆ†ææŠ¥å‘Š

## ğŸ“ æ ¸å¿ƒæ–‡ä»¶

### ä¸»è¦æ–‡ä»¶
- **`knowledge_coupling_mvp.py`** - æ ¸å¿ƒåˆ†æç³»ç»Ÿï¼ˆ779è¡Œï¼‰
- **`test_hotpot_20.json`** - æµ‹è¯•æ•°æ®ï¼ˆ20ä¸ªHotpotQAæ ·æœ¬ï¼‰
- **`requirements.txt`** - é¡¹ç›®ä¾èµ–

### æ¼”ç¤ºæ–‡ä»¶
- **`demo_results.py`** - æ¼”ç¤ºè¯¦ç»†ç»“æœç»“æ„çš„è„šæœ¬

### è¾“å‡ºæ–‡ä»¶
- **`coupling_heatmap.png`** - è€¦åˆå¼ºåº¦çƒ­å›¾
- **`mvp_report.md`** - åˆ†ææŠ¥å‘Š
- **`complete_results_demo.json`** - å®Œæ•´ç»“æœJSON

## ğŸ’» ä½¿ç”¨æ–¹æ³•

### 1. åŸºæœ¬è¿è¡Œ
```bash
python knowledge_coupling_mvp.py \
  --hotpot_data test_hotpot_20.json \
  --model_path gpt2 \
  --max_samples 10 \
  --device cuda \
  --output_dir results
```

### 2. æŸ¥çœ‹è¯¦ç»†ç»“æœ
```bash
python demo_results.py
```

## ğŸ“Š Results ç»“æ„

è¿è¡Œåˆ†æåï¼Œ`results` å­—å…¸åŒ…å«ä»¥ä¸‹9ä¸ªä¸»è¦éƒ¨åˆ†ï¼š

### 1. **metadata** - åŸºæœ¬ä¿¡æ¯
```python
{
  'model_path': 'gpt2',
  'model_type': 'gpt2', 
  'device': 'cuda',
  'total_samples_processed': 10,
  'analysis_timestamp': '2025-06-06 09:24:43'
}
```

### 2. **knowledge_pieces** - çŸ¥è¯†ç‰‡æ®µè¯¦æƒ…
```python
{
  'count': 10,
  'details': [è¯¦ç»†çš„çŸ¥è¯†ç‰‡æ®µä¿¡æ¯],
  'categories': {'Science': 7, 'Person': 3}
}
```

### 3. **gradient_analysis** - æ¢¯åº¦è®¡ç®—ç»“æœ
```python
{
  'total_gradients_computed': 10,
  'target_layers_count': 12,
  'gradient_dimension': 28320768
}
```

### 4. **coupling_analysis** - è€¦åˆå¼ºåº¦åˆ†æ
```python
{
  'total_pairs': 90,
  'high_coupling_pairs': 38,
  'mean_coupling': 0.4202,
  'max_coupling': 0.9995
}
```

### 5. **high_coupling_pairs** - é«˜è€¦åˆå¯¹è¯¦æƒ…
```python
{
  'count': 19,
  'threshold': 0.4,
  'top_10_detailed': [è¯¦ç»†çš„å€™é€‰å¯¹ä¿¡æ¯],
  'all_pairs': [æ‰€æœ‰é«˜è€¦åˆå¯¹]
}
```

### 6. **cross_pot_analysis** - è·¨potåˆ†æ
```python
{
  'unique_pots': 5,
  'cross_pot_pairs': 40,
  'same_pot_pairs': 5,
  'cross_pot_mean': 0.3811,
  'same_pot_mean': 0.7319
}
```

### 7. **generated_files** - ç”Ÿæˆæ–‡ä»¶è·¯å¾„
```python
{
  'coupling_matrix': 'results/coupling_matrix.npy',
  'knowledge_pieces_json': 'results/knowledge_pieces.json',
  'heatmap_visualization': 'coupling_heatmap.png'
}
```

### 8. **gpu_performance** - GPUæ€§èƒ½ä¿¡æ¯
```python
{
  'device': 'cuda',
  'gpu_name': 'NVIDIA A40',
  'gpu_memory_allocated_gb': 0.847,
  'gradient_computation': 'GPU'
}
```

### 9. **experiment_readiness** - å®éªŒå‡†å¤‡çŠ¶æ€
```python
{
  'ripple_candidates_available': True,
  'recommended_candidates': 5,
  'next_steps': ['Run cross-pot coupling analysis', ...]
}
```

## ğŸ”¬ æŠ€æœ¯ç»†èŠ‚

### æ ¸å¿ƒç®—æ³•
- **æ¢¯åº¦è®¡ç®—**: `GradSim(i,j) = cos(âˆ‡_Î¸ log P(a_i|q_i), âˆ‡_Î¸ log P(a_j|q_j))`
- **GPUä¼˜åŒ–**: æ¢¯åº¦è®¡ç®—åŠ é€Ÿä»1.54s/it â†’ 23.44it/s (15xæå‡)
- **ç›®æ ‡å±‚**: GPT-2çš„`transformer.h.{i}.mlp.c_proj`å±‚

### æ€§èƒ½æŒ‡æ ‡
- **GPUå†…å­˜ä½¿ç”¨**: ~1.4GB (NVIDIA A40)
- **å¤„ç†é€Ÿåº¦**: 23.44 æ ·æœ¬/ç§’
- **æ¢¯åº¦ç»´åº¦**: 28,320,768 å‚æ•°

## ğŸ“ˆ å…¸å‹åˆ†æç»“æœ

### è€¦åˆå¼ºåº¦ç»Ÿè®¡
- **å¹³å‡è€¦åˆ**: 0.4202
- **é«˜è€¦åˆå¯¹æ¯”ä¾‹**: 42.22%
- **è·¨potå¹³å‡è€¦åˆ**: 0.3811
- **åŒpotå¹³å‡è€¦åˆ**: 0.7319

### å®éªŒå‘ç°
- åŒä¸€HotpotQAé—®é¢˜å†…çš„çŸ¥è¯†ç‰‡æ®µè€¦åˆæ˜æ˜¾é«˜äºè·¨é—®é¢˜è€¦åˆ
- é«˜è€¦åˆå¯¹ä¸»è¦å‡ºç°åœ¨ç›¸åŒç±»åˆ«çš„çŸ¥è¯†ç‰‡æ®µé—´
- GPUåŠ é€Ÿä½¿å¤§è§„æ¨¡æ¢¯åº¦åˆ†ææˆä¸ºå¯èƒ½

## ğŸ¯ ä¸‹ä¸€æ­¥ç ”ç©¶æ–¹å‘

1. **æ¶Ÿæ¼ªæ•ˆåº”éªŒè¯**: ä½¿ç”¨MEMITç¼–è¾‘éªŒè¯é«˜è€¦åˆå¯¹çš„ç›¸äº’å½±å“
2. **æ›´å¤§è§„æ¨¡åˆ†æ**: æ‰©å±•åˆ°æ›´å¤šæ ·æœ¬å’Œæ›´å¤§æ¨¡å‹
3. **è·¨æ¨¡å‹æ¯”è¾ƒ**: æ¯”è¾ƒä¸åŒæ¨¡å‹æ¶æ„çš„çŸ¥è¯†è€¦åˆæ¨¡å¼
4. **å› æœå…³ç³»ç ”ç©¶**: æ·±å…¥ç ”ç©¶çŸ¥è¯†è€¦åˆçš„å› æœæœºåˆ¶

## ğŸ“‹ ç¯å¢ƒè¦æ±‚

- Python 3.8+
- PyTorch 2.0+
- CUDA GPU (æ¨è)
- 8GB+ GPUå†…å­˜

## ğŸ† é¡¹ç›®æˆæœ

- âœ… GPUä¼˜åŒ–çš„çŸ¥è¯†è€¦åˆåˆ†æç³»ç»Ÿ
- âœ… è¯¦ç»†çš„ç»“æœæ•°æ®ç»“æ„
- âœ… è·¨potè€¦åˆæ¨¡å¼å‘ç°
- âœ… å¯è§†åŒ–å’ŒæŠ¥å‘Šç”Ÿæˆ
- âœ… å®éªŒå€™é€‰å¯¹è‡ªåŠ¨è¯†åˆ«

---

*Generated by Knowledge Coupling MVP System* 